# Ingress to expose the frontend to the internet via a domain name
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  # Name used to identify this ingress resource
  name: voice-frontend
  annotations:
    # Use cert-manager to automatically provision a TLS certificate
    cert-manager.io/cluster-issuer: letsencrypt
spec:
  # TLS configuration for HTTPS
  tls:
    - hosts:
        - workshop.foundersandcoders.com
      # Secret where cert-manager will store the TLS certificate
      secretName: voice-frontend-tls
  rules:
    # Route traffic for this hostname - replace with your actual domain
    - host: workshop.foundersandcoders.com
      http:
        paths:
          # Match all paths and send them to the frontend service
          - path: /
            pathType: Prefix
            backend:
              service:
                # Name of the Service to route traffic to
                name: voice-frontend
                port:
                  # Port on the Service (not the container)
                  number: 80
